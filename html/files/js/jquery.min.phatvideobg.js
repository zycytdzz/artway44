/**
 * Phat Video Background
 * @version 2.1 (2.1 = on hover from start )
 * @author Spab Rice (spab-rice.com)
 * @copyright	Author
**/
!function(){"use strict";function e(e,a,o){("absolute"!==e.css("position")||"relative"!==e.css("position"))&&e.css({position:"relative"}),e.css("background","none"),e.append('<div class="phat-bgvideo-container" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:-2;overflow:hidden;"><div class="phat-bgvideo-loader" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:2;"><div class="loader"><span></span><span></span><span></span></div></div></div>');var i=e.find(".phat-bgvideo-container");switch(a.phatposter&&(i.css({background:"url("+a.phatposter+") center center","background-size":"cover"}),i.find(".phat-bgvideo-loader").css({background:"url("+a.phatposter+") center center","background-size":"cover"})),i.prepend('<div class="phat-bgvideo-overlay" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;"></div>'),a.phatoverlaycolor?i.find(".phat-bgvideo-overlay").css({background:a.phatoverlaycolor,opacity:a.phatoverlayopacity}):i.find(".phat-bgvideo-overlay").css({background:"transparent"}),a.phattype){case"youtube":var p="loop=0";(a.phatloop||"true"===a.phatloop)&&(p="loop=1&playlist="+a.phatvideoid);var s="";(a.phatmute||"true"===a.phatmute)&&(s=" youtube-muted");var r="autoplay=1";(a.phatplayonhover||"true"===a.phatplayonhover)&&(r="autoplay=0");var n='<iframe id="bgvid-'+o+'" class="video-background'+s+'" style="width:100%;height:100%;" src="https://www.youtube.com/embed/'+a.phatvideoid+"?"+r+"&amp;controls=0&amp;"+p+'&amp;showinfo=0&amp;modestbranding=1&amp;disablekb=1&amp;enablejsapi=1" frameborder="0"></iframe>';break;case"vimeo":var p="loop=0";(a.phatloop||"true"===a.phatloop)&&(p="loop=1");var s="";(a.phatmute||"true"===a.phatmute)&&(s=" vimeo-muted");var r="autoplay=1";(a.phatplayonhover||"true"===a.phatplayonhover)&&(r="autoplay=0");var n='<iframe id="bgvid-'+o+'" class="video-background'+s+'" style="width:100%;height:100%;" src="https://player.vimeo.com/video/'+a.phatvideoid+"?api=1&"+p+"&"+r+"&player_id=bgvid-"+o+'"></iframe>';break;case"html5":var p="";(a.phatloop||"true"===a.phatloop)&&(p=' loop="true"');var s="";(a.phatmute||"true"===a.phatmute)&&(s=' muted="muted"');var r='autoplay="autoplay"';(a.phatplayonhover||"true"===a.phatplayonhover)&&(r="");var n='<video style="object-fit:cover;width:101%;height:101%;" class="video-background" preload="auto" '+r+p+s+">";a.phatmp4&&(n+='<source src="'+a.phatmp4+'" type="video/mp4" />'),a.phatwebm&&(n+='<source src="'+a.phatwebm+'" type="video/webm" />'),a.phatogv&&(n+='<source src="'+a.phatogv+'" type="video/ogg" />'),n+="</video>"}jQuery(window).width()>1024&&(a.phatmute&&"false"!=a.phatmute||e.append('<a href="#" id="mute-video-'+o+'" class="mute-video mute-'+a.phattype+'" data-rel="bgvid-'+o+'" style="position:absolute;bottom:15px;left:15px;"><span>Sound</span><span></span><span></span></a>'),(a.phatplaypause||"true"==a.phatplaypause)&&e.append('<a href="#" id="playpause-video-'+o+'" class="playpause-video playpause-'+a.phattype+'" data-rel="bgvid-'+o+'" style="position:absolute;bottom:15px;left:45px;"><span>Play</span><span></span></a>'),i.prepend(n),("youtube"===a.phattype||"vimeo"===a.phattype)&&t(e,a.phatratio,a.phattype))}function t(e,t,a){var o=e.find(".phat-bgvideo-container").width(),i=e.find(".phat-bgvideo-container").height(),p=o/i,s=16,r=9;"4/3"===t&&(s=4,r=3),"21/9"===t&&(s=21,r=9);var n=s/r;if(p>n){var d=p/n,u=1.05*parseInt(d*i,10)+300,l=1.05*(parseInt(o),10);e.find("iframe.video-background").css({width:parseInt(l,10)+"px",height:parseInt(u,10)+"px",position:"relative",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%)","-moz-transform":"translateX(-50%) translateY(-50%)","-ms-transform":"translateX(-50%) translateY(-50%)","-o-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"})}else{var d=n/p,l=1.05*parseInt(d*o,10),u=1.05*parseInt(i,10)+300;e.find("iframe.video-background").css({height:parseInt(u,10)+"px",width:parseInt(l,10)+"px",position:"relative",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%)","-moz-transform":"translateX(-50%) translateY(-50%)","-ms-transform":"translateX(-50%) translateY(-50%)","-o-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"})}}function a(e){var t=new YT.Player("bgvid-"+e,{events:{onReady:function(){jQuery("#bgvid-"+e).parent(".phat-bgvideo-container").addClass("loaded"),jQuery("#bgvid-"+e).hasClass("youtube-muted")&&t.mute(),jQuery("body").on("click","#mute-video-"+e+".mute-video",function(){t.isMuted()?t.unMute():t.mute()}),jQuery("body").on("click","#playpause-video-"+e+".playpause-video",function(){jQuery(this).hasClass("play")?t.pauseVideo():t.playVideo()}),jQuery(".play-on-hover.videobg-id-"+e).on({mouseenter:function(){t.playVideo()},mouseleave:function(){t.pauseVideo(),setTimeout(function(){t.seekTo(0)},200)}})}}})}function o(e){var t=document.getElementById("bgvid-"+e),a=$f(t);a.addEvent("ready",function(){setTimeout(function(){a.api("play"),jQuery("#bgvid-"+e).parent(".phat-bgvideo-container").addClass("loaded")},300),jQuery(".videobg-id-"+e).hasClass("play-on-hover")&&setTimeout(function(){a.api("pause")},500),jQuery("#bgvid-"+e).hasClass("vimeo-muted")&&a.api("setVolume",0),jQuery(".play-on-hover.videobg-id-"+e).on({mouseenter:function(){a.api("play")},mouseleave:function(){a.api("pause"),setTimeout(function(){a.api("seekTo",0)},200)}})})}var i=document.getElementsByTagName("script")[0],p=document.createElement("script");p.src="https://www.youtube.com/iframe_api",i.parentNode.insertBefore(p,i);var s=document.createElement("script");s.src="https://f.vimeocdn.com/js/froogaloop2.min.js",i.parentNode.insertBefore(s,i),function(t){t.fn.extend({phatVideoBg:function(i){return this.each(function(p){var s=jQuery(this),r={phattype:!1,phatvideoid:!1,phatmp4:!1,phatwebm:!1,phatogv:!1,phatratio:"16/9",phatloop:!0,phatposter:!1,phatoverlaycolor:!1,phatoverlayopacity:.6,phatmute:!0,phatplaypause:!1,phatplayonhover:!1},n=t.extend({},r,i,s.data());s.hasClass("phatvideo-bg")||(s.addClass("phatvideo-bg"),e(s,n,p),"youtube"===n.phattype&&jQuery(window).width()>1024&&a(p),"vimeo"===n.phattype&&jQuery(window).width()>1024&&o(p),"html5"===n.phattype&&jQuery(window).width()>1024&&s.find(".phat-bgvideo-container").addClass("loaded"),n.phatplayonhover&&s.addClass("play-on-hover"),s.addClass("videobg-id-"+p))})}})}(jQuery),jQuery("body").on("click",".mute-video",function(){if(jQuery(this).hasClass("mute-html5")){var e=jQuery(this).siblings(".phat-bgvideo-container").find("video");0==e.prop("muted")?e.prop("muted",!0):e.prop("muted",!1)}else if(jQuery(this).hasClass("mute-vimeo")){var t=jQuery(this).data("rel"),a=document.getElementById(t),o=$f(a);jQuery(this).hasClass("unmute")?o.api("setVolume",1):o.api("setVolume",0)}return jQuery(this).toggleClass("unmute"),!1}),jQuery("body").on("click",".playpause-video",function(){if(jQuery(this).hasClass("playpause-html5")){var e=jQuery(this).siblings(".phat-bgvideo-container").find("video").get(0);jQuery(this).hasClass("play")?e.play():e.pause()}else if(jQuery(this).hasClass("playpause-vimeo")){var t=jQuery(this).data("rel"),a=document.getElementById(t),o=$f(a);jQuery(this).hasClass("play")?o.api("play"):o.api("pause")}return jQuery(this).toggleClass("play"),!1}),jQuery("body").on("mouseenter",".videobg-section.play-on-hover",function(){if(jQuery(this).find(".phat-bgvideo-container > video").length>0){var e=jQuery(this).find(".phat-bgvideo-container > video");jQuery(e)[0].play()}}).on("mouseleave",".videobg-section.play-on-hover",function(){if(jQuery(this).find(".phat-bgvideo-container > video").length>0){var e=jQuery(this).find(".phat-bgvideo-container > video");jQuery(e)[0].pause(),setTimeout(function(){jQuery(e)[0].currentTime=0},200)}})}(jQuery);